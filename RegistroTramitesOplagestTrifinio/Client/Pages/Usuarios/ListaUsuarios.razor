@page "/usuarios"
@inject IPeticionesHttp Http

<h3>Usuarios</h3>
<div class="form-group">
    <a class="btn btn-primary" href="usuarios/crear">Agregar usuario</a>
</div>

<div class="table-responsive-md">
    <table class="table table-hover">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Nombre</th>
                <th scope="col">Correo electr&oacute;nico</th>
                <th scope="col">Estado</th>
                <th scope="col">Fecha de creaci&oacute;n</th>
                <th scope="col">Opciones</th>
                <th scope="col"></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var usuario in Usuarios)
            {
                <tr>
                    <th scope="row">@(++correlativo)</th>
                    <td>@usuario.Nombre</td>
                    <td>@usuario.CorreoElectronico</td>
                    <td>@(usuario.Activo ? "Activo" : "Inactivo")</td>
                    <td>@(usuario.FechaCreacion!.Value.ToString("d"))</td>
                    <td colspan="2">
                        <a href="#" class="btn btn-info">Editar</a>
                        <button class="btn btn-danger">Eliminar</button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

@code {
    public List<UsuarioDTO> Usuarios { get; set; } = new List<UsuarioDTO>();
    public int correlativo = 0;

    protected async override Task OnInitializedAsync()
    {
        var respuesta = await Http.Get<List<UsuarioDTO>>("api/usuarios");
        Usuarios = respuesta.Respuesta;
    }
}